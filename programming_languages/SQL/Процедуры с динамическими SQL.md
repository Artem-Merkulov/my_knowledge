# Процедуры в SQL

### 1. Создание процедуры с динамическими SQL

```sql
CREATE PROCEDURE fire_employee (emp_id NUMBER) AS 
```

- `CREATE PROCEDURE`: Это команда для создания новой хранимой процедуры в базе данных. 
  Хранимая процедура — это набор SQL-инструкций, которые могут быть выполнены как единое целое.
- `fire_employee`: Это имя процедуры. Вы будете вызывать ее, используя это имя.
- `(emp_id NUMBER)`: Это параметр, который процедура принимает. В данном случае это `emp_id` 
  типа `NUMBER`, который будет использоваться для идентификации работника, которого нужно уволить.

### 2. Начало тела процедуры

```sql
BEGIN 
```

- `BEGIN`: Указывает начало блока кода, который будет выполняться, когда процедура будет вызвана.

### 3. Выполнение динамического SQL

```sql
EXECUTE IMMEDIATE 'DELETE FROM emp WHERE empno = :num' USING emp_id; 
```

- `EXECUTE IMMEDIATE`: Это команда, которая позволяет выполнять динамически сформированные 
  SQL-запросы. В данном случае она выполняет команду `DELETE`.
- `'DELETE FROM emp WHERE empno = :num'`: Это строка SQL-запроса, который будет выполнен. 
  Здесь `:num` является плейсхолдером для параметра, который будет передан позже.
- `USING emp_id`: Эта часть связывает значение параметра `emp_id` с плейсхолдером `:num` 
  в SQL-запросе. То есть, когда команда будет выполнена, `:num` будет заменен на значение `emp_id`.

### 4. Конец процедуры

```sql
END;
```

- `END;`: Указывает конец процедуры.

### Как это работает в целом

Когда вы вызываете процедуру `fire_employee`, передавая в нее идентификатор работника (например, 
`fire_employee(123)`), процедура выполнит следующий шаг:

1. Получит значение `emp_id`, которое вы передали (в этом случае `123`).
2. Сформирует и выполнит SQL-запрос: `DELETE FROM emp WHERE empno = 123`.
3. Удалит запись о сотруднике с идентификатором `123` из таблицы `emp`.

### Примечания

- Процедура позволяет удобно и безопасно выполнять операции с базой данных, избегая необходимости 
  повторно писать один и тот же SQL-код.
- Использование `EXECUTE IMMEDIATE` и параметризация помогает защититься от SQL-инъекций, так как 
  значения параметров не интерпретируются как часть SQL-кода.